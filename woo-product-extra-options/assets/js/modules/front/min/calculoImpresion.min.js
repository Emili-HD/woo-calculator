const data=JSON.parse(wpcc_vars.data),atributos=JSON.parse(wpcc_vars.atributos);export function customCalculoImpresion(a,o,e){function r(){const o=document.querySelector("div[data-name='color'] .wpcc-field-radios input[name=color]:checked");if(o){let a=o.value;c="bn"===a?atributos.maquina.maquina[1]:atributos.maquina.maquina[0];for(const a in s)if(c===s[a][0]){n=parseFloat(s[a][1]),console.log("preparacion",n);break}for(let a in t)if(c===t[a][0]){parseFloat(t[a][1]),parseFloat(t[a][5]),l=parseFloat(t[a][3]);break}}else{c=atributos.maquina.maquina[0],n=parseFloat(data.primas.preparacion_maquina[1][1]);for(let a in t)if(c===t[a][0]){parseFloat(t[a][1]),l=t[a][3];break}}let e;if(e="Copistería online"==productData.name?a.calculosInicialesCopisteria:a.customCalculosIniciales,0!==l)for(const o in e)for(const r in e[o].detalles)for(const i in e[o].detalles[r]){let s=e[o].detalles[r][i].impresiones,t={},c={},p={},u={};for(const a in s){t[a]=s[a]/l,c[a]=n+t[a];for(let o in data.primas.precio_hora_producción)if(c[a]>=parseFloat(data.primas.precio_hora_producción[o][2])&&c[a]<=parseFloat(data.primas.precio_hora_producción[o][3])){"Copistería online"==productData.name?p[a]=10*c[a]:p[a]=parseFloat(data.primas.precio_hora_producción[o][1])*c[a],u[a]=parseFloat(data.primas.precio_hora_producción[o][0])*c[a];break}}a.customCalculosImpresiones[o]||(a.customCalculosImpresiones[o]={cantidad:e[o].cantidad,detalles:{}}),a.customCalculosImpresiones[o].detalles[r]||(a.customCalculosImpresiones[o].detalles[r]={}),a.customCalculosImpresiones[o].detalles[r][i]={produccionHora:{...t},tiempoImpresion:{...c},costeImpresion:{...p},importeImpresion:{...u}}}}function i(){const a=document.querySelectorAll("div[data-name='color'] .wpcc-field-radios input[name=color]");a.forEach(a=>{a.addEventListener("change",r)})}a.customCalculosImpresiones=[];const s=data.primas.preparacion_maquina,t=data.primas.amortizacion;let c=0,n=0,l=0;r(),i()}